GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 1
SAGD Optimization - MILNP Algorithm
C o m p i l a t i o n


      	This is the main file for the SAGD Water Treatment Optimization using the 
      	MILNP Optimization.	
   6   
   7   
   8  *INITIALIZE SETS, DATA, and VARIABLES
   9   
INCLUDE    /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/sets_init.gms
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 2
sets_init
C o m p i l a t i o n


  12   
  13  *SUPERSETS
  14   
  15  sets
  16   
  17          tu              'treatment unit'
  18                  / st    skim tank
  19                    igf   induced gas flotation
  20                    orf   oil removal filter
  21                    hcy   hydro-cyclone
  22                    ls    warm-hot lime softener
  23                    evap  evaporator
  24                    wac   weak acid cation exchanger
  25                  /
  26   
  27          c               'contaminant'
  28                  / o             oil
  29                    s             silica
  30                    th    total hardness
  31                    tss   total suspended solids
  32                  /
  33   
  34          s               'water source'
  35                  / pw    produced water
  36                    muw   make-up water
  37                    bbd   boiler blowdown
  38                  /
  39   
  40          cs      'steam generation cases'
  41                  /1*4/ ;
  42   
  43  *MULTI-DIMENSIONAL SETS
  44   
  45  alias(tu,tup);
  46   
  47  set tu_tup(tu,tup) 'all recycle streams'
  48          /       st.igf, st.orf, st.hcy, st.ls, st.evap, st.wac,
  49                  igf.st, igf.orf, igf.hcy, igf.ls, igf.evap, igf.wac,
  50                  orf.st, orf.igf, orf.hcy, orf.ls, orf.evap, orf.wac,
  51                  hcy.st, hcy.igf, hcy.orf, hcy.ls, hcy.evap, hcy.wac,
  52                  ls.st, ls.igf, ls.orf, ls.hcy, ls.evap, ls.wac,
  53                  evap.st, evap.igf, evap.orf, evap.hcy, evap.ls, evap.wac,
  54                  wac.st, wac.igf, wac.orf, wac.hcy, wac.ls, wac.evap/ ;
  55   
  56  display tu_tup;
  57   
  58   
  59   
INCLUDE    /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 3
params_init
C o m p i l a t i o n


  62   
       
      The parameters for flow rates, concentrations, mass loads, cost, and others are
      initialized in this script.
       
      ***PARAMETERS ARE FOR CASE 1 ONLY FOR NOW***
      ***NEED TO FIND INFO FOR F_loss(tu), C_in_max(tu,c), C_loss(tu,c), and ALL cost parameters
  71   
  72  *FLOW RATES-------------------------------------------------------------------------------
  73   
  74  scalar F_BFW    'boiler feed water flow'
  75          /                       625 /;
  76   
  77  parameter F(s) 'flow of stream s'
  78          /         pw    475
  79                    bbd   0
  80                          /;
  81   
  82          F('muw') = F_BFW - F('pw') - F('bbd');
  83   
  84  parameter F_loss(tu)    'flow loss in tu'
  85          /         st    1
  86                    igf   1
  87                    orf   1
  88                    hcy   1
  89                    ls    1
  90                    evap  1
  91                    wac   1       /;
  92   
  93  *CONCENTRATIONS---------------------------------------------------------------------------
  94  *did not include C(s,tu,c) and C_ave(c) - they were not used in the equations
  95   
  96  table C_c_s(s,c)        'concentration of c in s'
  97                                  o               s               th              tss
  98        pw        2000    350             20              50
****                     $225   $225           $225            $225
**** LINE     38 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
  99        muw               0               15              245             0
****                          $225             $225             $225          $225
**** LINE     39 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 100        bbd       10      150             1               1       ;
****                   $225     $225          $225            $225
**** LINE     40 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 101  **pw and muw data collected from Forshomi thesis Table 3-1
 102  **muw is assumed to be fresh no brackish
 103  **bbd data collected from Forshomi appendix A Table A3 for OTSG
 104   
 105  table C_in_max(tu,c)    'maximum allowable inlet concentration of c in tu'
 106                          o               s               th              tss
 107          st              1               1               1               1
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 4
params_init
C o m p i l a t i o n


 108          igf             1               1               1               1
 109                  orf             1               1               1               1
****                                  $225            $225            $225            $225
**** LINE     49 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 110              hcy         1               1               1               1
 111                  ls              1               1               1               1
****                                  $225            $225            $225            $225
**** LINE     51 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 112                  evap    1               1               1               1
 113                  wac             1               1               1               1       ;
****                                  $225            $225            $225            $225
**** LINE     53 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 114   
 115  table C_loss(tu,c)      'concentration loss of c in tu'
 116                          o               s               th              tss
 117          st              1               1               1               1
 118          igf             1               1               1               1
 119                  orf             1               1               1               1
****                                  $225            $225            $225            $225
**** LINE     59 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 120              hcy         1               1               1               1
 121                  ls              1               1               1               1
****                                  $225            $225            $225            $225
**** LINE     61 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 122                  evap    1               1               1               1
 123                  wac             1               1               1               1       ;
****                                  $225            $225            $225            $225
**** LINE     63 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 124   
 125  parameter C_target(c)   'target concentration required at discharge'
 126          /       o               10
 127                  s               150
 128                  th              1
 129                  tss             1       /;
 130   
 131  *MASS LOADS-------------------------------------------------------------------------------
 132  *did not include ML_tot(c) - it was not used in the equations
 133   
 134  parameter ML_rem(c)     'mass load of contaminant to be removed from the system';
 135          ML_rem(c) = sum( s, F(s) * (C_c_s(s,c) - C_target(c)) );
 136  ** E17 - double check this formula, there might be problems with brackets**
 137   
 138  *COST PARAMETERS--------------------------------------------------------------------------
 139   
 140  parameter cost_var_s(s) 'variable cost of s'
 141          /       pw              1
 142                  muw             1
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 5
params_init
C o m p i l a t i o n


 143                  bbd             1       /;
 144   
 145  parameter cost_fix_s(s) 'fixed cost of s'
 146          /       pw              1
 147                  muw             1
 148                  bbd             1       /;
 149   
 150  parameter cost_var_tu(tu)       'variable cost of tu'
 151          /       st              1
 152                  igf             1
 153                  orf             1
 154                  hcy             1
 155                  ls              1
 156                  evap    1
 157                  wac             1       /;
 158   
 159  parameter cost_fix_tu_a(tu)     'fixed cost of tu - function slope'
 160          /       st              1
 161                  igf             1
 162                  orf             1
 163                  hcy             1
 164                  ls              1
 165                  evap    1
 166                  wac             1       /;
 167   
 168  parameter cost_fix_tu_b(tu)     'fixed cost of tu - function intercept'
 169          /       st              1
 170                  igf             1
 171                  orf             1
 172                  hcy             1
 173                  ls              1
 174                  evap    1
 175                  wac             1       /;
 176   
 177  *OTHER PARAMETERS-------------------------------------------------------------------------
 178   
 179  table RR(tu,c)  'removal ratio of contaminant c'
 180                          o               s               th              tss
 181          st              0.9             0               0               0.5
 182          igf             0.9             0               0               0.7
 183                  orf             0.91    0               0               0.95
****                                     $225
**** LINE    123 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 184              hcy         0.93    0               0               0
****                                  $225            $225            $225
**** LINE    124 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 185                  ls              0               0.9             0.5             0
****                                  $225              $225            $225          $225
**** LINE    125 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 6
params_init
C o m p i l a t i o n


 186                  evap    0.99    0.99    0.99    0.99
****                                     $225            $225
**** LINE    126 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 187                  wac             0               0               0.99    0       ;
****                                  $225            $225               $225
**** LINE    127 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
**** LINE     11 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 188   
 189  scalar Bound_up 'upper bound for stream flow rates'
 190          /625/;
 191  *arbitrary values - model values not given by Forshomi
 192   
 193  scalar Bound_low        'lower bound for stream flow rates'
 194          /200/;
 195  *arbitrary values - model values not given by Forshomi
 196   
 197  parameter NS_max(tu)    'maximum number of streams that can go through tu'
 198          /         st    10
 199                    igf   10
 200                    orf   10
 201                    hcy   10
 202                    ls    10
 203                    evap  10
 204                    wac   10      /;
 205  *arbitrary values - model values not given by Forshomi
 206   
 207  scalar HY       'number of operational hours per year'
 208          /8322/;
 209  **assuming 95% on-stream time
 210   
 211   
 212   
 213   
 214   
 215   
 216   
 217   
 218   
 219   
 220   
 221   
 222   
 223   
INCLUDE    /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/vars_init.gms
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 7
vars_init
C o m p i l a t i o n


 226   
       
      The variables for flow rates, concentrations, mass loads, cost, and others are
      initialized in this script.
       
 233   
 234  *FLOW RATES
 235   
 236  positive variables
 237          F_s_tu(s,tu)    'flow rate of s entering tu'
 238          F_rec(tu_tup)   'flow rate of streams exiting tu that enter tup for recycle'
****                     $122
**** LINE     14 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/vars_init.gms
**** LINE     12 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 239          F_exit(tu)              'flow rate of streams leaving tu to the discharge point'
 240          F_in(tu)                'flow rate of streams entering tu'
 241          F_out(tu)               'flow rate of streams directly exiting tu'      ;
 242   
 243  *CONCENTRATIONS
 244   
 245  positive variables
 246          C_in(tu,c)              'concentration of c in tu inlet'
 247          C_rout(tu_tup,c)        'concentration of c exiting tu and entering tup for recycle'
****                      $122
**** LINE     23 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/vars_init.gms
**** LINE     12 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 248          C_exit(tu,c)    'concentration of c leaving tu to the discharge point'
 249          C_out(tu,c)             'concentration of streamt directly exiting tu'
 250          C_BFW(c)                'concentration of c in BFW'     ;
 251   
 252  *MASS LOADS
 253   
 254  positive variables
 255          ML_in(tu,c)             'mass load of c entering tu'
 256          ML_out(tu,c)    'mass load of c exiting tu'     ;
 257   
 258  *COST AND ENERGY VARIABLES
 259   
 260  positive variables
 261          Cost_tot(tu)    'total cost of tu'
 262          Cost_op                 'operating cost of the system'
 263          Cost_cap                'capital cost of the system'
 264          Cost_tot                'total capital cost of the system'
 265          energy_var(tu)  'energy consumption of tu'
 266          energy_tot              'total energy consumption of the system'
 267   
 268  *BINARY VARIABLES
 269   
 270  binary variables
 271          B_s_tu(s,tu)    'binary variable to show the existence of stream s into tu'
 272          B_tu_tup(tu_tup)        'binary variable to show the existence of tu into tup recylce'
****                        $122
**** LINE     48 INCLUDE     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/vars_init.gms
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 8
vars_init
C o m p i l a t i o n


**** LINE     12 INPUT       /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
 273          B_exit(tu)              'binary variable to show the existence of stream from tu to discharge'
 274          B_tu(tu)                'binary variable to show the existence of tu'
 275   
 276   
 277   
 278   
 279   
 280  *EQUATIONS
 281   
 282  *$include minlp_eqns.gms
 283   
 284  *SOLVE MINLP
 285   
 286   
 287   
 288  *OUTPUT
 289   
 290   
 291   
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                   08/14/17 15:10:22 Page 9
vars_init
Error Messages


122  One dimensional set expected
225  Floating entry ignored

**** 52 ERROR(S)   0 WARNING(S)
GAMS 24.8.5  r61358 Released May 10, 2017 DEX-DEG x86 64bit/Mac OS X                                                                                                                                                                  08/14/17 15:10:22 Page 10
vars_init
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
     2       10 INCLUDE        1      10  ./Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/sets_init.gms
     3       60 INCLUDE        1      11  ./Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/params_init.gms
     4      224 INCLUDE        1      12  ./Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/vars_init.gms


COMPILATION TIME     =        0.005 SECONDS      3 MB  24.8.5 r61358 DEX-DEG


USER: GAMS Development Corporation, Washington, DC   G871201/0000CA-ANY
      Free Demo,  202-342-0180,  sales@gams.com,  www.gams.com   DC0000


**** FILE SUMMARY

Input      /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.gms
Output     /Users/Malfrine/Documents/Work/UAlberta-RA/ZL/gams/minlp_main.lst

**** USER ERROR(S) ENCOUNTERED
